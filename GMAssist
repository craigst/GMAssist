#include Codes

/*GUI inilize*/
ver = V0.9 Beta
Menu,Tray,Add,Exit,GuiClose
SetTitleMatchMode, 2
Gui, Add, Checkbox, x1 y5 w100 vCheckbox gCheckBox, Block Popups         /* check box for blocking pop ups */
Gui, Add, Checkbox, x115 y5 w100 vLogger gLogger, TD Message Logger      /* check box for recording messages */
Gui, Add, Checkbox, x1 y19 w100 vbeta gbeta, Info popup block            /* dissmissing info pop ups */
Gui, Add, Checkbox, x1 y39 w120 vawait gawait, Auto Await Instrutions    /* send await instruions on driver clears */
Gui, Add, button, x0 y390 gClear, Clear ; to clear the list of messages  /* clear message box */
Gui, Add, button, x165 y390 ghelp, Help                                  /* opens help display */
Gui, Add, button, x130 y390 gTime, Time                                  /* pastes time in msg window */
Gui, Add, button, x110 y390 gProgram, G                                  /* program link / custom link */
Gui, Add, button, x137 y38 GOptions , Options                            /* time option window */
Gui, Add, edit, x3 y65 h310 w195 vlist,                                  /* Text/msg box */
Gui, Add, text, x45 y395 w60 , %ver%                                     /* version tag */
Gui, Show, h415 w200 X945 Y5 ,TD Assist                                  /* Opens GUI with SIZE */
Return

/*Main GUI Buttons and Options*/

/*GUI Options inilize*/
Options:
	Gui, Show,
return

/*G Button Link*/
Program: 
	run, /*"program"*/
return

/*Message logger*/
Logger:
   GuiControlGet, Logger
   SetTimer, Logger2, % (Logger ? 0 : "Off")
Return

beta:
   GuiControlGet, beta
   SetTimer, beta2, % (beta ? 0 : "Off")
Return

await:
   GuiControlGet, await
   SetTimer, await2, % (beta ? 0 : "Off")
Return

Label: ; block td notes acept and on scenes
SetTitleMatchMode, 3
   IfWinExist, TD Note
   {
   sleep 3000
   ControlClick, THUNDERRT6COMMANDBUTTON1, TD Note,,,,NA 
   }
      
return

beta2:  ; block confirm messages 
SetTitleMatchMode, 3
   IfWinExist, Garage Manager ahk_class #32770
   {
   WinClose
   }
return

await2: ; auto sent await instrution on clear down
IfWinExist, TD Clear Note
{
	SLEEP 1000
	Controlclick, THUNDERRT6OPTIONBUTTON2, TD Clear Note 
	sleep, 300
	ControlClick, THUNDERRT6COMMANDBUTTON2, TD Clear Note
}
return
	
Logger2: ; to colect message from drive and store in gui + log
SetTitleMatchMode, Slow
SetTitleMatchMode, 3
IfWinExist, TD Message
{
   CONTROLgetTEXT, text, ThunderRT6TextBox1
   ControlClick, THUNDERRT6COMMANDBUTTON1, TD Message
   FileAppend, %text%`n, C:\Tdmessageslog.txt
   GuiControlGet, list
   list .= text
   GuiControl,, list, %list%`n`n
   IfWinExist, TD Manager
    WinActivate, wintitle, TD Manager
	ControlSend,, list, ^{end}
}
return

Clear:
GuiControl,, list,
;clear messages
return

help:
MsgBox, 0, Help %ver%, Windows key + V Edit's job `n`nWindows key + C Clears job `n`nInfo popup block: stops info cleardown / ata times sent `n`nBlock popups: stops on scene + on duty + job accept + off duty delayed by 3 Seconds `n`nTD Message Logger: stops driver message popups and lists messages In log screen `n`nAuto Await instrusions : will auto reply when driver has cleared `n`nNight Control: Will let you chosse Night PDA or Phone `n`nG Button : Open's Google 
return

Time:
    time = %A_Hour%:%A_Min%
	GuiControlGet, list
	list .= time
	GuiControl,, list, %time%`n
    RETURN










/* Edits open active job */
#IFWINACTIVE, ahk_class ThunderRT6FormDC,
#V::
SetTitleMatchMode, Slow
ControlGetText, mainbox, ThunderRT6TextBox2
CONTROLGETTEXT, DES, ThunderRT6TextBox23,
CONTROLGETTEXT, NOTES, ThunderRT6TextBox22,
ControlSetText, ThunderRT6TextBox2,%mainbox% `n`n%DES% `n`n%NOTES%
CONTROLSETTEXT, ThunderRT6TextBox23, 
CONTROLSETTEXT, ThunderRT6TextBox22, 
CONTROLSETTEXT, EDIT8, With Vehicle
CONTROLSETTEXT, EDIT7, With Vehicle
return


/* Clears open active job */
SetTitleMatchMode, 2
SetTitleMatchMode, Slow
#IFWINACTIVE, Recovery ,
#C::
CONTROLSETTEXT, Club, ThunderRT6TextBox??,
JobCode(Club)
/* code */

return
